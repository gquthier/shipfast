<!DOCTYPE html>
<html lang="fr" class="bg-black scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuickShip — Questionnaire pré-call</title>
    <meta name="description" content="Remplissez ce court questionnaire avant votre call de découverte QuickShip.">

    <link href="https://api.fontshare.com/v2/css?f[]=clash-display@200,400,700,500,600,1&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=JetBrains+Mono:wght@400;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', 'sans-serif'],
                        'heading': ['Clash Display', 'sans-serif'],
                        'mono': ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        black: '#050505',
                        surface: '#121212',
                        surfaceBorder: '#262626',
                        accent: '#CCFF00',
                        accentHover: '#b3e600'
                    }
                }
            }
        }
    </script>

    <style>
        ::selection { background-color: #CCFF00; color: #000; }
        body { background-color: #050505; color: #E5E5E5; overflow-x: hidden; }
        .bg-grid {
            background-size: 40px 40px;
            background-image: linear-gradient(to right, rgba(255,255,255,0.03) 1px, transparent 1px),
                              linear-gradient(to bottom, rgba(255,255,255,0.03) 1px, transparent 1px);
            mask-image: linear-gradient(to bottom, black 40%, transparent 100%);
            -webkit-mask-image: linear-gradient(to bottom, black 40%, transparent 100%);
        }
        .title-uppercase { text-transform: uppercase; letter-spacing: -0.02em; }

        /* Step transitions */
        .step { display: none; opacity: 0; transform: translateY(20px); }
        .step.active { display: block; animation: stepIn 0.4s ease-out forwards; }
        .step.exit { display: block; animation: stepOut 0.25s ease-in forwards; }
        @keyframes stepIn { to { opacity: 1; transform: translateY(0); } }
        @keyframes stepOut { to { opacity: 0; transform: translateY(-20px); } }

        /* Choice buttons */
        .choice-btn { transition: all 0.2s ease; }
        .choice-btn:hover { border-color: #CCFF00; color: #fff; }
        .choice-btn.selected { border-color: #CCFF00; background: rgba(204,255,0,0.08); color: #fff; }

        /* Checkbox items */
        .check-item { transition: all 0.2s ease; cursor: pointer; }
        .check-item:hover { border-color: #CCFF00; }
        .check-item.checked { border-color: #CCFF00; background: rgba(204,255,0,0.08); }
        .check-item.checked .check-box { background: #CCFF00; }
        .check-item.checked .check-box::after { content: '✓'; color: #000; font-size: 12px; font-weight: bold; }

        textarea:focus { outline: none; border-color: #CCFF00; }

        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #050505; }
        ::-webkit-scrollbar-thumb { background: #262626; border-radius: 4px; }
    </style>
</head>

<body class="font-sans antialiased selection:bg-accent selection:text-black min-h-screen flex flex-col">

    <div class="fixed inset-0 bg-grid z-0 pointer-events-none"></div>

    <!-- HEADER -->
    <header class="border-b border-surfaceBorder relative z-20 bg-black/80 backdrop-blur-lg">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16 sm:h-20">
                <a href="/" class="font-heading font-bold text-xl sm:text-2xl tracking-tight text-white">
                    QUICK<span class="text-accent">SHIP.</span>
                </a>
                <div class="font-mono text-xs text-gray-500 uppercase">Questionnaire pré-call</div>
            </div>
        </div>
    </header>

    <!-- MAIN -->
    <main class="relative z-10 flex-1 flex items-center">
        <div class="w-full max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-12 sm:py-16">

            <!-- =============================== -->
            <!-- STEP 1: Describe your idea -->
            <!-- =============================== -->
            <div class="step active" data-step="1">
                <div class="font-mono text-accent text-xs font-bold uppercase tracking-widest mb-6">[ QUESTION 01 ]</div>
                <h2 class="font-heading title-uppercase text-3xl sm:text-4xl font-semibold text-white mb-4">
                    DÉCRIVEZ VOTRE IDÉE.
                </h2>
                <p class="text-gray-400 text-sm sm:text-base font-sans mb-8 leading-relaxed">
                    Expliquez votre projet le plus précisément possible. Quelles sont les fonctionnalités clés ? Quel problème résolvez-vous et pour qui ?
                </p>
                <textarea id="q-idea" rows="6" placeholder="Ex: Une app SaaS qui permet aux freelances de générer des factures automatiquement. Features clés : création de factures, suivi des paiements, dashboard analytics, export PDF..."
                    class="w-full bg-surface border border-surfaceBorder text-white font-sans text-sm p-4 sm:p-6 resize-none placeholder-gray-600 leading-relaxed"></textarea>
                <button onclick="nextStep()" class="mt-6 w-full sm:w-auto px-8 py-4 bg-accent text-black font-heading font-bold text-sm uppercase hover:bg-accentHover transition-colors">
                    CONTINUER →
                </button>
            </div>

            <!-- =============================== -->
            <!-- STEP 2: Competitors -->
            <!-- =============================== -->
            <div class="step" data-step="2">
                <div class="font-mono text-accent text-xs font-bold uppercase tracking-widest mb-6">[ QUESTION 02 ]</div>
                <h2 class="font-heading title-uppercase text-3xl sm:text-4xl font-semibold text-white mb-4">
                    DES CONCURRENTS EN TÊTE ?
                </h2>
                <p class="text-gray-400 text-sm sm:text-base font-sans mb-8 leading-relaxed">
                    Connaissez-vous des produits ou services qui font quelque chose de similaire ? Listez les noms ou URLs si possible.
                </p>
                <textarea id="q-competitors" rows="4" placeholder="Ex: Stripe Invoicing, Facture.net, Tiime... Ou 'Je n'en connais pas encore'"
                    class="w-full bg-surface border border-surfaceBorder text-white font-sans text-sm p-4 sm:p-6 resize-none placeholder-gray-600 leading-relaxed"></textarea>
                <button onclick="nextStep()" class="mt-6 w-full sm:w-auto px-8 py-4 bg-accent text-black font-heading font-bold text-sm uppercase hover:bg-accentHover transition-colors">
                    CONTINUER →
                </button>
            </div>

            <!-- =============================== -->
            <!-- STEP 3: Internal or commercial -->
            <!-- =============================== -->
            <div class="step" data-step="3">
                <div class="font-mono text-accent text-xs font-bold uppercase tracking-widest mb-6">[ QUESTION 03 ]</div>
                <h2 class="font-heading title-uppercase text-3xl sm:text-4xl font-semibold text-white mb-4">
                    USAGE INTERNE OU COMMERCIAL ?
                </h2>
                <p class="text-gray-400 text-sm sm:text-base font-sans mb-8 leading-relaxed">
                    Ce produit est destiné à être utilisé en interne (outil pour votre équipe) ou commercialisé auprès de clients ?
                </p>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4" id="q-usage">
                    <button onclick="selectChoice(this, 'q-usage')" data-value="interne"
                        class="choice-btn border border-surfaceBorder bg-surface p-6 text-left group">
                        <div class="font-mono text-xs text-gray-500 uppercase mb-2">Option A</div>
                        <div class="font-heading font-bold text-lg text-gray-300 uppercase">Produit interne</div>
                        <p class="text-gray-500 text-xs mt-2 font-sans">Outil pour mon équipe / ma boîte</p>
                    </button>
                    <button onclick="selectChoice(this, 'q-usage')" data-value="commercial"
                        class="choice-btn border border-surfaceBorder bg-surface p-6 text-left group">
                        <div class="font-mono text-xs text-gray-500 uppercase mb-2">Option B</div>
                        <div class="font-heading font-bold text-lg text-gray-300 uppercase">Produit commercial</div>
                        <p class="text-gray-500 text-xs mt-2 font-sans">À vendre / monétiser auprès de clients</p>
                    </button>
                </div>
            </div>

            <!-- =============================== -->
            <!-- STEP 4: Maturity -->
            <!-- =============================== -->
            <div class="step" data-step="4">
                <div class="font-mono text-accent text-xs font-bold uppercase tracking-widest mb-6">[ QUESTION 04 ]</div>
                <h2 class="font-heading title-uppercase text-3xl sm:text-4xl font-semibold text-white mb-4">
                    OÙ EN ÊTES-VOUS ?
                </h2>
                <p class="text-gray-400 text-sm sm:text-base font-sans mb-8 leading-relaxed">
                    Sélectionnez tout ce qui s'applique à votre projet aujourd'hui.
                </p>
                <div class="space-y-3" id="q-maturity">
                    <div onclick="toggleCheck(this)" data-value="domaine" class="check-item flex items-center gap-4 border border-surfaceBorder bg-surface p-4">
                        <div class="check-box w-5 h-5 border border-surfaceBorder flex items-center justify-center flex-shrink-0"></div>
                        <span class="text-sm text-gray-300 font-sans">J'ai déjà acheté un nom de domaine</span>
                    </div>
                    <div onclick="toggleCheck(this)" data-value="branding" class="check-item flex items-center gap-4 border border-surfaceBorder bg-surface p-4">
                        <div class="check-box w-5 h-5 border border-surfaceBorder flex items-center justify-center flex-shrink-0"></div>
                        <span class="text-sm text-gray-300 font-sans">J'ai déjà un logo / branding</span>
                    </div>
                    <div onclick="toggleCheck(this)" data-value="dev_commence" class="check-item flex items-center gap-4 border border-surfaceBorder bg-surface p-4">
                        <div class="check-box w-5 h-5 border border-surfaceBorder flex items-center justify-center flex-shrink-0"></div>
                        <span class="text-sm text-gray-300 font-sans">J'ai déjà commencé à développer</span>
                    </div>
                    <div onclick="toggleCheck(this)" data-value="maquettes" class="check-item flex items-center gap-4 border border-surfaceBorder bg-surface p-4">
                        <div class="check-box w-5 h-5 border border-surfaceBorder flex items-center justify-center flex-shrink-0"></div>
                        <span class="text-sm text-gray-300 font-sans">J'ai des maquettes / wireframes</span>
                    </div>
                    <div onclick="toggleCheck(this)" data-value="clients" class="check-item flex items-center gap-4 border border-surfaceBorder bg-surface p-4">
                        <div class="check-box w-5 h-5 border border-surfaceBorder flex items-center justify-center flex-shrink-0"></div>
                        <span class="text-sm text-gray-300 font-sans">J'ai déjà des clients / utilisateurs potentiels</span>
                    </div>
                    <div onclick="toggleCheck(this)" data-value="rien" class="check-item flex items-center gap-4 border border-surfaceBorder bg-surface p-4">
                        <div class="check-box w-5 h-5 border border-surfaceBorder flex items-center justify-center flex-shrink-0"></div>
                        <span class="text-sm text-gray-300 font-sans">J'en suis au tout début — juste l'idée</span>
                    </div>
                </div>
                <button onclick="nextStep()" class="mt-6 w-full sm:w-auto px-8 py-4 bg-accent text-black font-heading font-bold text-sm uppercase hover:bg-accentHover transition-colors">
                    CONTINUER →
                </button>
            </div>

            <!-- =============================== -->
            <!-- STEP 5: Pricing validation -->
            <!-- =============================== -->
            <div class="step" data-step="5">
                <div class="font-mono text-accent text-xs font-bold uppercase tracking-widest mb-6">[ QUESTION 05 ]</div>
                <h2 class="font-heading title-uppercase text-3xl sm:text-4xl font-semibold text-white mb-4">
                    LE PRICING VOUS CONVIENT ?
                </h2>
                <p class="text-gray-400 text-sm sm:text-base font-sans mb-8 leading-relaxed">
                    Notre offre MVP est à <strong class="text-white">990€ tout compris</strong>, livré en 48h. Êtes-vous OK avec ce tarif si nous délivrons bien le produit dans les délais ?
                </p>
                <div class="space-y-3" id="q-pricing">
                    <button onclick="selectChoice(this, 'q-pricing')" data-value="oui_parfait"
                        class="choice-btn w-full border border-surfaceBorder bg-surface p-5 text-left flex items-center gap-4">
                        <span class="w-8 h-8 border border-surfaceBorder flex items-center justify-center font-mono text-xs text-gray-500 flex-shrink-0">A</span>
                        <span class="text-sm text-gray-300 font-sans">Oui, 990€ c'est parfait pour moi</span>
                    </button>
                    <button onclick="selectChoice(this, 'q-pricing')" data-value="oui_si_qualite"
                        class="choice-btn w-full border border-surfaceBorder bg-surface p-5 text-left flex items-center gap-4">
                        <span class="w-8 h-8 border border-surfaceBorder flex items-center justify-center font-mono text-xs text-gray-500 flex-shrink-0">B</span>
                        <span class="text-sm text-gray-300 font-sans">Oui, si la qualité est au rendez-vous</span>
                    </button>
                    <button onclick="selectChoice(this, 'q-pricing')" data-value="besoin_details"
                        class="choice-btn w-full border border-surfaceBorder bg-surface p-5 text-left flex items-center gap-4">
                        <span class="w-8 h-8 border border-surfaceBorder flex items-center justify-center font-mono text-xs text-gray-500 flex-shrink-0">C</span>
                        <span class="text-sm text-gray-300 font-sans">J'ai besoin de plus de détails avant de me décider</span>
                    </button>
                    <button onclick="selectChoice(this, 'q-pricing')" data-value="non"
                        class="choice-btn w-full border border-red-500/30 bg-surface p-5 text-left flex items-center gap-4">
                        <span class="w-8 h-8 border border-red-500/30 flex items-center justify-center font-mono text-xs text-red-400 flex-shrink-0">D</span>
                        <span class="text-sm text-gray-300 font-sans">Non, ce n'est pas dans mon budget</span>
                    </button>
                </div>
                <p class="mt-6 font-mono text-[11px] text-gray-600 leading-relaxed border-l-2 border-surfaceBorder pl-4">
                    Si le pricing ne vous convient pas, nous vous recommandons d'<a href="https://calendly.com/gauthierthiry" class="text-gray-400 underline hover:text-accent">annuler votre call sur Calendly</a> pour ne perdre le temps de personne. Merci de votre honnêteté.
                </p>
            </div>

            <!-- =============================== -->
            <!-- STEP 6: Serious? -->
            <!-- =============================== -->
            <div class="step" data-step="6">
                <div class="font-mono text-accent text-xs font-bold uppercase tracking-widest mb-6">[ QUESTION 06 ]</div>
                <h2 class="font-heading title-uppercase text-3xl sm:text-4xl font-semibold text-white mb-4">
                    PRÊT À VOUS LANCER ?
                </h2>
                <p class="text-gray-400 text-sm sm:text-base font-sans mb-8 leading-relaxed">
                    Nous réalisons seulement <strong class="text-white">5 projets par mois</strong> à ce tarif. Êtes-vous sérieux dans votre démarche et en mesure de donner une réponse à l'issue de notre appel ?
                </p>
                <div class="space-y-3" id="q-serious">
                    <button onclick="selectChoice(this, 'q-serious')" data-value="oui"
                        class="choice-btn w-full border border-surfaceBorder bg-surface p-5 text-left flex items-center gap-4">
                        <span class="w-8 h-8 border border-accent/30 bg-accent/5 flex items-center justify-center font-mono text-xs text-accent flex-shrink-0">✓</span>
                        <span class="text-sm text-gray-300 font-sans"><strong class="text-white">Oui</strong> — je suis prêt à me lancer et à décider après le call</span>
                    </button>
                    <button onclick="selectChoice(this, 'q-serious')" data-value="peut-etre"
                        class="choice-btn w-full border border-surfaceBorder bg-surface p-5 text-left flex items-center gap-4">
                        <span class="w-8 h-8 border border-surfaceBorder flex items-center justify-center font-mono text-xs text-gray-500 flex-shrink-0">~</span>
                        <span class="text-sm text-gray-300 font-sans"><strong class="text-white">Peut-être</strong> — j'ai encore quelques questions à clarifier</span>
                    </button>
                    <button onclick="selectChoice(this, 'q-serious')" data-value="non"
                        class="choice-btn w-full border border-surfaceBorder bg-surface p-5 text-left flex items-center gap-4">
                        <span class="w-8 h-8 border border-red-500/30 flex items-center justify-center font-mono text-xs text-red-400 flex-shrink-0">✗</span>
                        <span class="text-sm text-gray-300 font-sans"><strong class="text-white">Non</strong> — je suis juste curieux pour l'instant</span>
                    </button>
                </div>
            </div>

            <!-- =============================== -->
            <!-- STEP 7: Email + Submit -->
            <!-- =============================== -->
            <div class="step" data-step="7">
                <div class="font-mono text-accent text-xs font-bold uppercase tracking-widest mb-6">[ DERNIÈRE ÉTAPE ]</div>
                <h2 class="font-heading title-uppercase text-3xl sm:text-4xl font-semibold text-white mb-4">
                    VOTRE EMAIL.
                </h2>
                <p class="text-gray-400 text-sm sm:text-base font-sans mb-8 leading-relaxed">
                    Pour qu'on puisse vous recontacter et préparer votre call.
                </p>
                <input type="email" id="q-email" placeholder="votre@email.com"
                    class="w-full bg-surface border border-surfaceBorder text-white font-mono text-sm p-4 sm:p-5 placeholder-gray-600 focus:outline-none focus:border-accent">
                <input type="text" id="q-name" placeholder="Votre prénom (optionnel)"
                    class="w-full bg-surface border border-surfaceBorder text-white font-mono text-sm p-4 sm:p-5 placeholder-gray-600 focus:outline-none focus:border-accent mt-3">
                <button onclick="submitForm()" id="submit-btn"
                    class="mt-6 w-full px-8 py-5 bg-accent text-black font-heading font-bold text-lg uppercase hover:bg-accentHover transition-colors">
                    ENVOYER MES RÉPONSES
                </button>
            </div>

            <!-- =============================== -->
            <!-- STEP 8: Thank You -->
            <!-- =============================== -->
            <div class="step" data-step="8">
                <div class="text-center">
                    <div class="inline-flex items-center justify-center w-20 h-20 border-2 border-accent bg-accent/10 mb-8">
                        <svg class="w-10 h-10 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="square" stroke-linejoin="miter" stroke-width="3" d="M5 13l4 4L19 7"/>
                        </svg>
                    </div>
                    <h2 class="font-heading title-uppercase text-3xl sm:text-5xl font-semibold text-white mb-4">
                        C'EST ENVOYÉ.
                    </h2>
                    <p class="text-gray-400 text-base font-sans mb-8 leading-relaxed max-w-md mx-auto">
                        Merci pour vos réponses. On prépare votre call — à très vite.
                    </p>
                    <a href="/"
                        class="inline-flex items-center gap-2 font-mono text-sm text-gray-500 hover:text-accent transition-colors uppercase">
                        ← Retour à l'accueil
                    </a>
                </div>
            </div>

        </div>
    </main>

    <!-- PROGRESS BAR -->
    <div class="fixed bottom-0 left-0 right-0 z-50 bg-black/90 backdrop-blur-sm border-t border-surfaceBorder">
        <div class="max-w-2xl mx-auto px-4 py-3 flex items-center justify-between gap-4">
            <div class="flex-1 h-1.5 bg-surfaceBorder overflow-hidden">
                <div id="progress-bar" class="h-full bg-accent transition-all duration-500 ease-out" style="width: 14%"></div>
            </div>
            <div id="progress-text" class="font-mono text-xs text-gray-500 uppercase flex-shrink-0">14%</div>
        </div>
    </div>

    <script>
        // State
        let currentStep = 1;
        const totalSteps = 7; // 7 questions, step 8 is thank you
        const answers = {};

        // Webhook URL (Railway)
        const WEBHOOK_URL = 'https://webhook-production-b9fc.up.railway.app/submit';

        function updateProgress() {
            const pct = Math.round((currentStep / totalSteps) * 100);
            document.getElementById('progress-bar').style.width = pct + '%';
            document.getElementById('progress-text').textContent = pct + '%';
        }

        function goToStep(n) {
            const current = document.querySelector('.step.active');
            const next = document.querySelector(`[data-step="${n}"]`);
            if (!next || !current) return;

            current.classList.remove('active');
            current.classList.add('exit');

            setTimeout(() => {
                current.classList.remove('exit');
                current.style.display = 'none';
                next.classList.add('active');
                currentStep = n;
                updateProgress();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }, 250);
        }

        function nextStep() {
            // Save textarea answers for current step
            if (currentStep === 1) {
                const v = document.getElementById('q-idea').value.trim();
                if (!v) { shakeEl(document.getElementById('q-idea')); return; }
                answers.idea = v;
            }
            if (currentStep === 2) {
                answers.competitors = document.getElementById('q-competitors').value.trim() || 'Non renseigné';
            }
            if (currentStep === 4) {
                const checked = document.querySelectorAll('#q-maturity .check-item.checked');
                answers.maturity = Array.from(checked).map(el => el.dataset.value);
                if (answers.maturity.length === 0) answers.maturity = ['non_renseigné'];
            }
            goToStep(currentStep + 1);
        }

        function selectChoice(btn, groupId) {
            // Deselect all in group
            document.querySelectorAll(`#${groupId} .choice-btn`).forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
            answers[groupId.replace('q-', '')] = btn.dataset.value;

            // Auto-advance after short delay
            setTimeout(() => nextStep(), 400);
        }

        function toggleCheck(el) {
            el.classList.toggle('checked');
        }

        function shakeEl(el) {
            el.style.borderColor = '#ef4444';
            el.classList.add('animate-shake');
            setTimeout(() => {
                el.style.borderColor = '';
                el.classList.remove('animate-shake');
            }, 600);
        }

        async function submitForm() {
            const email = document.getElementById('q-email').value.trim();
            if (!email || !email.includes('@')) {
                shakeEl(document.getElementById('q-email'));
                return;
            }
            answers.email = email;
            answers.name = document.getElementById('q-name').value.trim() || 'Non renseigné';
            answers.submitted_at = new Date().toISOString();

            const btn = document.getElementById('submit-btn');
            btn.textContent = 'ENVOI EN COURS...';
            btn.disabled = true;
            btn.style.opacity = '0.6';

            try {
                if (WEBHOOK_URL && WEBHOOK_URL !== '__WEBHOOK_URL__') {
                    await fetch(WEBHOOK_URL, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(answers)
                    });
                }
            } catch (e) {
                console.error('Webhook error:', e);
            }

            // Always go to thank you
            goToStep(8);
            // Hide progress bar
            document.querySelector('.fixed.bottom-0').style.display = 'none';
        }

        // Keyboard shortcut: Enter to continue on textareas
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                const active = document.querySelector('.step.active');
                if (!active) return;
                const step = parseInt(active.dataset.step);
                if (step === 1 || step === 2) {
                    // Only advance with Ctrl+Enter for textareas
                    if (e.ctrlKey || e.metaKey) {
                        e.preventDefault();
                        nextStep();
                    }
                } else if (step === 7) {
                    e.preventDefault();
                    submitForm();
                }
            }
        });
    </script>

</body>
</html>
